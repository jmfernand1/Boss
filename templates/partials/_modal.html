{% comment %}
Modal Component (HTMX Compatible)
Usage: Include with x-data for Alpine.js control
{% endcomment %}

<div x-data="{ modalOpen: false }" 
     x-on:open-modal.window="modalOpen = true" 
     x-on:close-modal.window="modalOpen = false"
     x-on:keydown.escape.window="modalOpen = false">
    
    <!-- Modal Backdrop -->
    <div x-show="modalOpen"
         x-transition:enter="ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-slate-500/75 transition-opacity z-50"
         @click="modalOpen = false">
    </div>
    
    <!-- Modal Panel -->
    <div x-show="modalOpen"
         x-transition:enter="ease-out duration-300"
         x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
         x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
         x-transition:leave="ease-in duration-200"
         x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
         x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
         class="fixed inset-0 z-50 overflow-y-auto">
        
        <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
            <div class="relative transform overflow-hidden rounded-xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"
                 @click.stop>
                
                <!-- Modal Header -->
                <div class="bg-slate-50 px-6 py-4 border-b border-slate-200">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold text-slate-900" id="modal-title">
                            {% block modal_title %}Modal Title{% endblock %}
                        </h3>
                        <button type="button" 
                                @click="modalOpen = false"
                                class="rounded-md text-slate-400 hover:text-slate-500 focus:outline-none focus:ring-2 focus:ring-primary-500">
                            <span class="sr-only">Cerrar</span>
                            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                </div>
                
                <!-- Modal Content -->
                <div class="px-6 py-4" id="modal-content">
                    {% block modal_content %}
                    <!-- Content goes here -->
                    {% endblock %}
                </div>
                
                <!-- Modal Footer -->
                <div class="bg-slate-50 px-6 py-4 border-t border-slate-200 flex justify-end gap-3">
                    {% block modal_footer %}
                    <button type="button" 
                            @click="modalOpen = false"
                            class="inline-flex justify-center rounded-lg border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-700 shadow-sm hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2">
                        Cancelar
                    </button>
                    <button type="button"
                            class="inline-flex justify-center rounded-lg bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2">
                        Confirmar
                    </button>
                    {% endblock %}
                </div>
            </div>
        </div>
    </div>
</div>
